@model List<AppraisalSystem.Models.UploadPictureAssetModel>
@{
    ViewBag.Title = "รูปเอกสารสิทธิ์";
    ViewBag.Header = "";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="panel-heading"><label>รูปเอกสารสิทธิ์</label></div>
<div class="panel-body">
@using (Html.BeginForm("ManageAssetDocPic", "Manage", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="col-md-8">
        <div class="form-group">
            <label>หมายเลขงาน</label>
            <input class="form-control ui-wizard-content"/>
            @Html.TextBox("AssetManageType", @TempData["AssetManageType"], new { @class = "form-control ui-wizard-content", @style = "display:none" })
        </div> 
         @for (var i = 0; i < Model.Count;i++ )
         {
           @Html.HiddenFor(model => Model[i].appraisal_assets_id)
           @Html.HiddenFor(model => Model[i].image_assets_id)
           @Html.HiddenFor(model => Model[i].image_path)
          <div class="form-group">
            <label>รูปเอกสารสิทธิ์</label>
            <input type="file" name="MultipleFiles"/>
        </div>
             
      if (Model[i].image_path != null && Model[i].image_path != "")
      {
            <div class="form-group">   
             <img src= "@Url.Content(Model[i].image_path)" alt="Edit" width="200px" id="img_@(Model[i].image_assets_id)" />
              <button type="button" id="icon_@(Model[i].image_assets_id)" value="@(Model[i].image_assets_id)" class="btn btn-info ui-wizard-content ui-formwizard-button" onclick="removeImg(value);">X</button>
            </div>
      }
        <div class="form-group">
            <label>คำอธิบายรูปภาพ</label>
             @Html.TextAreaFor(model => Model[i].description, new { @class = "form-control" })
        </div>
         }
        <div class="form-group">
              @if (TempData["AssetManageType"].ToString() == "i")
         {
            <button type="submit" id="btnSubmit" class="btn btn-info ui-wizard-content ui-formwizard-button" style="float:right;margin-right:10px" value="บันทึก"><i class="fa fa-save"></i> @Resources.ConfigResource.BtnSubmit</button>
         }
           else if (TempData["AssetManageType"].ToString() == "u")
         {
             <button type="submit" id="btnSubmit" class="btn btn-primary ui-wizard-content ui-formwizard-button" style="float:right;margin-right:10px" value="แก้ไข" ><i class="fa fa-edit"></i> @Resources.ConfigResource.BtnEdit</button>
         } 

        </div>
    </div>
}
</div>

 <script type="text/javascript">

     function removeImg(value) {

         $("#img_" + value).css('display', 'none');
         $("#icon_" + value).css('display', 'none');

         var url = "/Manage/removeImgDB";
         var imageAssetId = value;
         $.get(url, { imageAssetId: imageAssetId }, function (data) {
           
         });
     }
    
</script>